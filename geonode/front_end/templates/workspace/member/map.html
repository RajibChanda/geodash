{% extends 'site_base.html' %}
{% load i18n %}

{% block title %}{% trans "Member Workspace" %}{% endblock %}

{% comment %}
{% block subnav %}
<li><a href="{% url "actstream_object_feed" content_type_id=ctype.pk  object_id=actor.pk %}">RSS</a></li>
<li><a href="{% url "actstream_object_feed_atom" content_type_id=ctype.pk  object_id=actor.pk %}">ATOM</a></li>
{% endblock %}
{% endcomment %}

{% block body_outer %}
<style>
        body{
            background-color: #fff;
        }
        .container
        {
            width: 100%;
        }
        
    .nav-sidebar {
        margin-right: -21px;
        margin-bottom: 20px;
        margin-left: -20px;
    }
    footer
    {
        z-index: 1008;
    }
    .main
    {
        background-color: #fff;
    }
    .nav-sidebar > .active > a, .nav-sidebar > .active > a:hover, .nav-sidebar > .active > a:focus {
        color: #fff;
        background-color: #428bca;
    }
    .d-title
    {
        padding-bottom: 30px;
    }
    </style>
    
    <div class="row" ng-app="workspaceApp" ng-controller="MemberMapController">
        <div class="col-sm-2 col-xs-1 col-md-2 workspace-sidebar">
                  
                    <ul class="nav nav-sidebar">
                            <li role="presentation"><a href="{% url "member-workspace-layer" %}"><i class="fa fa-clone" aria-hidden="true"></i><span>{% trans "Layers" %}</span></a></li>
                            <li role="presentation" class="active"><a href="{% url "member-workspace-map" %}"><i class="fa fa-map" aria-hidden="true"></i><span>{% trans "Maps" %}</span></a></li>
                            <li role="presentation"><a href="{% url "member-workspace-document" %}"><i class="fa fa-file" aria-hidden="true"></i><span>{% trans "Documents" %}</span></a></li>
                            </ul>

                </div>
                <div class="col-sm-10 col-sm-offset-2 col-xs-11 col-xs-offset-1 col-md-10 col-md-offset-2 main">
                        <h1 class="d-title" style="margin: 0"> {% trans "Member Workspace" %}</h1>
                    <h1> hi jaha [{printme + 'fgd'}] </h1>



                <!--MODAL--jahangir--->
                <!--this modal is used for delete map from draft list-->
                <!--this modal will be popped when 'Delete Map' button is clicked-->
                <!--in map draft list-->

                <div class="modal fade" id="_delete_map" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog" style="width:500px;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title text-center" id="myModalLabel">{% trans "Delete Map" %}</h4>
                            </div>
                            <div class="modal-body">
                                <div class="form-group" ng-controller="MemberMapController">
                                    <h5> Are you sure you want to Delete this map ? </h5>

                                </div>
                            </div>
                            <div class="alert hidden" id="bulk_perms_message">
                                <p class="message">}</p>
                                <p class="extra_content"></p>
                            </div>
                            <form method="post" id="Map_Del" action="">

                                {% csrf_token %}
                                <div class="modal-footer">
                                    <button class="btn btn-default" data-dismiss="modal">{% trans "Cancel" %}</button>
                                    <button type="submit" class="btn btn-primary"  ng-click="deleteDraftMap()">{% trans "Yes" %}</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!--END MODAL-->

                        <div class="gd-content">
                                <div class="row">
                                  <div class="col-md-12">
                                     
                                   
                                    <ul class="nav nav-tabs">
                                      <li class="active" ng-click="mapDraftList()"><a href="#draft" data-toggle="tab">{% trans "Draft" %}</a></li>
                                      <li ng-click="mapPendingList()"><a href="#pending" id="pending_list_maps" data-toggle="tab">{% trans "Pending" %}</a></li>
                                      <li ng-click="mapDeniedList()"><a href="#denied" id="denied_list_maps" data-toggle="tab">{% trans "Denied" %}</a></li>
                                      <li ng-click="mapActiveList()"><a href="#active" id="active_list_maprs" data-toggle="tab">{% trans "Active" %}</a></li>
                                    </ul>
                                        <div class="col-md-4">
                                            <input class="form-control mr-sm-2" type="search" ng-model-options="{ allowInvalid: true, debounce: 500 }" ng-model="searchString"  ng-change="backendSearch()" placeholder="Search" aria-label="Search">
                                        </div>
                                        <br><br><br>

                                    <div class="tab-content">
                                      <article id="draft" class="tab-pane active">
                                        <ul class="no-style-list">

                                            <div class="table-responsive">
                                            <table class="table table-hover" style="background:#ffffff;">
                                                <thead>
                                                    <tr>
                                                        <th>No.</th>
                                                        <th>Map Title</th>
                                                        <th>Organization</th>
                                                        <th>Map Creation Date</th>

                                                    </tr>
                                                </thead>
                                                    <tbody ng-repeat="i in items">
                                                    <th> [{ counter + $index + 1}] </th>
                                                    <th><a href=[{i.detail_url}]> [{i.title}]</a></th>
                                                    <th> [{i.group}] </th>
                                                    <th> [{i.date_created}] </th>
                                                    <th ng-init="approvalUrl = i.detail_url + '?user_role=member'">
                                                    <a href = [{approvalUrl}]>
                                                        <button type="button", class="btn btn-gd-primary">Continue for approval</button>
                                                    </a>
                                                    </th>
                                                    <th> <button type="button" class="btn btn-gd-primary" ng-click="deleteMapModal(i.id)" style="color:#fff;">
                                                        {% trans "Delete Map" %}</button>
                                                    </th>
                                                    </tbody>
                                            </table>
                                            </div>

                                            <div id="showallMemberDraftmapspag">
                    
                                            </div>
                                        </ul>
                                      </article>
                                      <article id="pending" class="tab-pane">
                                        <ul class="no-style-list">
                                            <table class="table table-hover" style="background:#ffffff;">
                                                <thead>
                                                    <tr>
                                                        <th>Serial No</th>
                                                        <th>Map Title</th>
                                                        <th>Organization</th>
                                                        <th>Request Date</th>
                                                    </tr>
                                                </thead>
                                                <tbody ng-repeat="i in items ">
                                                    <th> [{ counter + $index + 1}] </th>
                                                    <th><a href=[{i.detail_url}]> [{i.title}]</a></th>
                                                    <th> [{i.group}] </th>
                                                    <th> [{i.date_updated}] </th>
                                                </tbody>
                                            </table>
                                            <div id="showallMemberDraftmapspag_panding">
                    
                                            </div>
                                        </ul>
                                      </article>
                                      <article id="denied" class="tab-pane">
                                        <ul class="no-style-list">
                                            <table class="table table-hover" style="background:#ffffff;">
                                                <thead>
                                                    <tr>
                                                        <th>Serial No</th>
                                                        <th>Map Title</th>
                                                        <th>Organization</th>
                                                        <th>Who Denied</th>
                                                        <th>Denied Date</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>

                                                <tbody ng-repeat="i in items ">
                                                    <th> [{ counter + $index + 1}] </th>
                                                    <th><a href=[{i.detail_url}]> [{i.title}]</a></th>
                                                    <th> [{i.group}] </th>
                                                    <th>[{i.last_auditor}]</th>
                                                    <th> [{i.date_updated}] </th>
                                                    <th ng-init="approvalUrl = i.detail_url + '?user_role=member'">
                                                        <a href = [{approvalUrl}]>
                                                            <button type="button", class="btn btn-gd-primary">Edit and push again</button>
                                                        </a>
                                                    </th>
                                                </tbody>

                                            </table>
                                            <div id="showallMemberDraftmapspag_denied">
                    
                                            </div>
                                        </ul>
                                      </article>
                                      <article id="active" class="tab-pane ">
                                        <ul class="no-style-list">
                                            <table class="table table-hover" style="background:#ffffff;">
                                                <thead>
                                                    <tr>
                                                        <th>Serial No</th>
                                                        <th>Map Title</th>
                                                        <th>Organization</th>
                                                        <th>Activator</th>
                                                        <th>Activation Date</th>
                                                        <th>Map Edit</th>
                                                    </tr>
                                                </thead>

                                                <tbody ng-repeat="i in items ">
                                                    <th> [{ counter + $index + 1}] </th>
                                                    <th><a href=[{i.detail_url}]> [{i.title}]</a></th>
                                                    <th> [{i.group}] </th>
                                                    <th>[{i.last_auditor}]</th>
                                                    <th> [{i.date_updated}] </th>
                                                    <th ng-init="approvalUrl = i.detail_url + '?user_role=member'">
                                                        <a href = [{approvalUrl}]>
                                                            <button type="button", class="btn btn-gd-primary">Edit</button>
                                                        </a>
                                                    </th>
                                                </tbody>

                                            </table>
                                            <div id="showallMemberDraftmapspag_active">
                    
                                            </div>
                                        </ul>
                                      </article>
                                    </div>
                                  </div>
                                </div>
                                </div>
                           

                </div>
              </div>

{% include "map_templates/_delete_map.html" %}
{% endblock %}

{% block extra_script %}
{{ block.super }}
<script>
function mapLayer(id){
        //console.log(id);
        var sleID = parseInt(id);
        $("#testid").html(id);
        $('#_delete_map').modal('show');
        $('#Map_Del').attr('action', '../../maps/'+ sleID +'/delete');
    }

$(function () {
    $("#follow_button, #unfollow_button").click(function () {
        $.post($(this).attr("href"), {});
        $(this).parent().find("#follow_button, #unfollow_button").toggle();
        return false
    });
});
</script>

<script src="{{ STATIC_URL }}Scripts/lib/angular-animate.min.js"></script>
<script src="{{ STATIC_URL }}workspace/js/apps.js"></script>
<script src="{{ STATIC_URL }}workspace/js/controllers.js"></script>
<script src="{{ STATIC_URL }}workspace/js/filters.js"></script>
<script src="{{ STATIC_URL }}workspace/js/services.js"></script>

{% endblock %}
